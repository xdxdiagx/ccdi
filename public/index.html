<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" ng-app="newApp" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" ng-app="newApp" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" ng-app="newApp" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" ng-app="newApp" class="no-js">
  <!--<![endif]-->

  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>CCDi | Grade Monitoring</title>

    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
    <!-- jQuery library -->
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> -->

    <!-- Latest compiled JavaScript -->
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

    <script src="./assets/libraries/plugins/jquery/jquery.min.js"></script>
    <!-- <script src="./assets/libraries/Bootstrap/bootstrap.css"></script> -->
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- <link rel="stylesheet" type="text/css" href="assets/libraries/Bootstrap/bootstrap.css"> -->
    <link
      rel="icon"
      href="./assets/libraries/dist/img/ccdi.jpg"
      sizes="16x16"
    />
    <!-- Font Awesome Icons -->
    <link
      rel="stylesheet"
      href="./assets/libraries/plugins/fontawesome-free/css/all.min.css"
    />
    <!-- Ionicons -->
    <link
      rel="stylesheet"
      href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css"
    />

    <link
      rel="stylesheet"
      href="./assets/libraries/plugins/bootstrap-colorpicker/css/bootstrap-colorpicker.css"
    />
    <!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->

    <!-- <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
    <!-- <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script> -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

    <!-- Treeview -->
    <!-- <script src="/treeview/bootstrap-treeview.min.css"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-treeview/1.2.0/bootstrap-treeview.min.js"></script>

    <link rel="stylesheet" href="./assets/libraries/dist/css/loader.css" />

    <!-- Theme style -->
    <link
      rel="stylesheet"
      href="./assets/libraries/dist/css/adminlte.min.css"
    />
    <!-- Google Font: Source Sans Pro -->
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700"
      rel="stylesheet"
    />

    <!-- jQuery -->

    <!-- AngularJS -->
    <!-- <script src="../public/assets/libraries/AngularJS/angular.js"></script> -->
    <script src="./assets/libraries/AngularJS/angular.js"></script>
    <script src="./assets/libraries/AngularJS/angular-route.js"></script>
    <script src="./bower_components/firebase/firebase.js"></script>
    <script src="./bower_components/angularfire/dist/angularfire.js"></script>
    <!-- Firebase -->

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-database.js"></script>

    <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
    <script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>

    <script>
      // Your web app's Firebase configuration
      // For Firebase JS SDK v7.20.0 and later, measurementId is optional
      var firebaseConfig = {
        apiKey: "AIzaSyChWX0VQaewRUrl2M5sS2Jz7K1m2oVfibs",
        authDomain: "ccdigradeanalysis.firebaseapp.com",
        databaseURL:
          "https://ccdigradeanalysis-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "ccdigradeanalysis",
        storageBucket: "ccdigradeanalysis.appspot.com",
        messagingSenderId: "621883905535",
        appId: "1:621883905535:web:a23c56d5cfaa4852f2c3ca",
        measurementId: "G-Y0H5F8DJ2R",
      };
      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      // firebase.analytics();

      // var user_role = localStorage.getItem("role");
      // var email = localStorage.getItem("email");
      // var user_key = localStorage.getItem("user_key");
      // var display_name = localStorage.getItem("display_name");

      // if (email) {
      //   // document.getElementById("photoURL").src =
      //   //   "assets/libraries/dist/img/user2-160x160.jpg";
      //   document.getElementById("username").innerHTML = email;
      //   // document.getElementById("username").innerHTML = display_name;
      //   if (user_role == "admin" || user_role == "registrar") {
      //     $("#mysubjects").show();
      //     $("#myprofile").show();
      //     $("#dashboard").show();
      //     $("#settings").show();
      //   } else if (user_role == "faculty") {
      //     $("#mysubjects").show();
      //     $("#myprofile").show();
      //     $("#dashboard").show();
      //   } else if (user_role == "student") {
      //     $("#mysubjects").show();
      //     $("#myprofile").show();
      //   }
      // } else {
      //   window.location.href = "./login.html";
      // }

      var ref = firebase.database().ref("/users");
      // firebase.auth().onAuthStateChanged(function (user) {
      //   if (user) {
      //     console.log(user);
      //     var temp = firebase.auth().currentUser.photoURL;
      //     // console.log(firebase.auth().currentUser.photoURL);
      //     // console.log(firebase.auth().currentUser.displayName);
      //     if (temp == null) {
      //       document.getElementById("photoURL").src =
      //         "assets/libraries/dist/img/user2-160x160.jpg";
      //     } else {
      //       document.getElementById("photoURL").src = temp;
      //     }
      //     if (firebase.auth().currentUser.displayName == null) {
      //       document.getElementById("username").innerHTML =
      //         firebase.auth().currentUser.email;
      //       localStorage.setItem("email", firebase.auth().currentUser.email);
      //     } else {
      //       document.getElementById("username").innerHTML =
      //         firebase.auth().currentUser.displayName;
      //     }

      //     var user_role = localStorage.getItem("role");

      //     $("#mysubjects").show();
      //     // $("#dashboard").show();
      //     $("#myprofile").show();
      //     // $("#sr").show();
      //     // $("#jf").show();
      //     // $("#gcmm").show();
      //     // $("#r8").show();
      //     // $("#reports").show();

      //     if (user_role == "admin" || user_role == "faculty") {
      //       $("#dashboard").show();
      //       $("#settings").show();
      //     }

      //     // var role = sessionStorage.getItem("role");

      //     // if (role == 'admin') {
      //     //     $("#aia").show();
      //     //     $("#gan").show();
      //     //     $("#sr").show();
      //     //     $("#jf").show();
      //     //     $("#gcmm").show();
      //     //     $("#r8").show();
      //     //     $("#reports").show();
      //     //     $("#settings").show();
      //     //     // $("#ai").hide();
      //     //     // $("#logs").hide();
      //     //     // $("#settings").hide();
      //     // } else if (role == 'encoder') {
      //     //     $("#aia").show();
      //     //     $("#gan").show();
      //     //     $("#sr").show();
      //     //     $("#jf").show();
      //     //     $("#gcmm").show();
      //     //     $("#r8").show();
      //     //     // $("#settings").show();
      //     //     // $("#settings").hide();
      //     // }

      //     var userVerify = firebase.auth().currentUser;
      //     // ref
      //     //   .orderByChild("role")
      //     //   .once("value")
      //     //   .then(function (snapshot) {
      //     //     var exist = snapshot.exists();
      //     //     var UID = firebase.auth().currentUser.uid;
      //     //     var role = snapshot.child(UID).child("role").val();
      //     //     // console.log(UID);
      //     //     // console.log(snapshot.val());
      //     //     // console.log(role);
      //     //     if (role == "admin") {
      //     //       $("#aia").show();
      //     //       $("#gan").show();
      //     //       $("#sr").show();
      //     //       $("#jf").show();
      //     //       $("#gcmm").show();
      //     //       $("#r8").show();
      //     //       $("#reports").show();
      //     //       $("#settings").show();
      //     //     } else if (role == "aia") {
      //     //       $("#aia").show();
      //     //       // $("#gan").show();
      //     //       // $("#sr").show();
      //     //       // $("#jf").show();
      //     //       // $("#gcmm").show();
      //     //       // $("#r8").show();
      //     //     } else if (role == "gan") {
      //     //       // $("#aia").show();
      //     //       $("#gan").show();
      //     //       // $("#sr").show();
      //     //       // $("#jf").show();
      //     //       // $("#gcmm").show();
      //     //       // $("#r8").show();
      //     //     } else if (role == "sr") {
      //     //       // $("#aia").show();
      //     //       // $("#gan").show();
      //     //       $("#sr").show();
      //     //       // $("#jf").show();
      //     //       // $("#gcmm").show();
      //     //       // $("#r8").show();
      //     //     } else if (role == "jf") {
      //     //       // $("#aia").show();
      //     //       // $("#gan").show();
      //     //       // $("#sr").show();
      //     //       $("#jf").show();
      //     //       // $("#gcmm").show();
      //     //       // $("#r8").show();
      //     //     } else if (role == "gcmm") {
      //     //       // $("#aia").show();
      //     //       // $("#gan").show();
      //     //       // $("#sr").show();
      //     //       // $("#jf").show();
      //     //       $("#gcmm").show();
      //     //       // $("#r8").show();
      //     //     } else if (role == "r8") {
      //     //       // $("#aia").show();
      //     //       // $("#gan").show();
      //     //       // $("#sr").show();
      //     //       // $("#jf").show();
      //     //       // $("#gcmm").show();
      //     //       $("#r8").show();
      //     //     }
      //     // });
      //   } else {
      //     // console.log("login");
      //     // console.log(window.location.pathname);
      //     // window.location.pathname = './login.html';
      //     window.location.href = "./login.html";
      //   }
      // });
    </script>
  </head>

  <!-- <body class="hold-transition sidebar-mini sidebar-closed sidebar-collapse"> -->

  <body class="hold-transition sidebar-mini">
    <div class="wrapper">
      <!-- Navbar -->
      <nav class="main-header navbar navbar-expand navbar-white navbar-light">
        <!-- Left navbar links -->

        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" data-widget="pushmenu" href="" role="button"
              ><i class="fas fa-bars"></i
            ></a>
          </li>
          <div class="col-sm-12">
            <h3 class="m-0 text-dark">CCDi Grade Monitoring System</h3>
          </div>
          <!-- <li class="nav-item d-none d-sm-inline-block">
                    <a href="#/" class="nav-link">Home</a>
                </li>
                <li class="nav-item d-none d-sm-inline-block">
                    <a href="#" class="nav-link">Contact</a>
                </li> -->
        </ul>

        <!-- SEARCH FORM -->
        <!-- <form class="form-inline ml-3">
                <div class="input-group input-group-sm">
                    <input class="form-control form-control-navbar" type="search" placeholder="Search" aria-label="Search">
                    <div class="input-group-append">
                        <button class="btn btn-navbar" type="submit">
                <i class="fas fa-search"></i>
              </button>
                    </div>
                </div>
            </form> -->

        <!-- Right navbar links -->
        <ul class="navbar-nav ml-auto">
          <!-- <li class="nav-item">
                    <a class="nav-link" data-widget="control-sidebar" data-slide="true" href="#/" role="button"><i
                            class="fas fa-th-large"></i></a>
                </li> -->
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown" href="#">
              <i class="fas fa-sliders-h"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
              <span class="dropdown-item dropdown-header"
                ><i class="far fa-question-circle fa-2x"></i
              ></span>

              <div class="dropdown-divider"></div>
              <!-- <a href="#/profile" class="dropdown-item">
                            <i class="fas fa-users"></i> Profile
                        </a> -->
              <div class="dropdown-divider"></div>
              <a href="#/" class="dropdown-item" onclick="signout()">
                <i class="fas fa-sign-out-alt"></i> Logout
              </a>
            </div>
          </li>
        </ul>
      </nav>
      <!-- /.navbar -->

      <!-- Main Sidebar Container -->
      <aside class="main-sidebar sidebar-dark-primary elevation-4">
        <!-- Brand Logo -->
        <a href="#/" class="brand-link">
          <img
            src="assets/libraries/dist/img/ccdi.jpg"
            alt="AdminLTE Logo"
            class="brand-image img-circle elevation-3"
            style="opacity: 0.8"
          />
          <span class="brand-text font-weight-light"> CCDi</span>
          <!-- <h5>GCM Update System</h5> -->
        </a>

        <!-- Sidebar -->
        <div class="sidebar">
          <!-- Sidebar user panel (optional) -->
          <div class="user-panel mt-3 pb-3 mb-3 d-flex">
            <div class="image">
              <img
                id="photoURL"
                src="assets/libraries/dist/img/user2-160x160.jpg"
                class="img-circle elevation-2"
                alt="User Image"
              />
            </div>
            <div class="info">
              <a href="" class="d-block" id="username"></a>
            </div>
          </div>

          <!-- Sidebar Menu -->
          <nav class="mt-2">
            <ul
              class="nav nav-pills nav-sidebar flex-column"
              data-widget="treeview"
              role="menu"
              data-accordion="false"
            >
              <!-- Add icons to the links using the .nav-icon class
             with font-awesome or any other icon font library -->
              <li
                style="display: none"
                class="nav-item has-treeview menu-open"
                id="dashboard"
              >
                <a href="#/Dashboard" class="nav-link active">
                  <i class="nav-icon fas fa-tachometer-alt"></i>
                  <p>Dashboard</p>
                </a>
              </li>
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="builder"
              >
                <a class="nav-link">
                  <i class="nav-icon fas fa-cogs"> </i>
                  <p>
                    3A | Builder
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#/custom" class="nav-link">
                      <i class="nav-icon fa fa-gavel"></i>
                      <p>Custom</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/native" class="nav-link">
                      <i class="nav-icon fa fa-magic"></i>
                      <p>Native</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li style="display: none" class="nav-item has-treeview" id="ai">
                <a class="nav-link">
                  <i class="nav-icon fas fa-fingerprint"></i>
                  <p>
                    A.i
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#/bot" class="nav-link">
                      <i class="nav-icon fas fa-robot"></i>
                      <p>Bot Only</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/machinelearning" class="nav-link">
                      <i class="nav-icon far fa-lightbulb"></i>
                      <p>Machine Learn</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/deeplearning" class="nav-link">
                      <i class="nav-icon fas fa-bolt"></i>
                      <p>Deep Learn</p>
                    </a>
                  </li>
                </ul>
              </li>
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="mysubjects"
              >
                <a href="#/MySubjects" class="nav-link">
                  <i class="nav-icon far fa-address-book"></i>
                  <p>My Subjects</p>
                </a>
              </li>
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="facultySubjects"
              >
                <a href="#/FacultySubjects" class="nav-link">
                  <i class="nav-icon far fa-address-book"></i>
                  <p>My Subjects</p>
                </a>
              </li>
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="myprofile"
              >
                <a href="#/profile" class="nav-link">
                  <i class="nav-icon far fa-id-card"></i>
                  <p>Profile</p>
                </a>
              </li>
              <!-- <li style="display: none" class="nav-item has-treeview" id="aia">
                <a href="#/AthletesInAction" class="nav-link">
                  <i class="nav-icon fas fa-swimmer"></i>
                  <p>Athletes in Action</p>
                </a>
              </li>
               <li style="display: none" class="nav-item has-treeview" id="gan">
                <a href="#/GlobalAidNetwork" class="nav-link">
                  <i class="nav-icon fas fa-globe-asia"></i>
                  <p>Global Aid Network</p>
                </a>
              </li>
              <li style="display: none" class="nav-item has-treeview" id="sr">
                <a href="#/StoryRunners" class="nav-link">
                  <i class="nav-icon fas fa-running"></i>
                  <p>Story Runners</p>
                </a>
              </li>
              <li style="display: none" class="nav-item" id="jf">
                <a href="#/JesusFilms" class="nav-link">
                  <i class="nav-icon fas fa-film"></i>
                  <p>Jesus Films</p>
                </a>
              </li>
              <li style="display: none" class="nav-item" id="gcmm">
                <a href="#/GCMManila" class="nav-link">
                  <i class="nav-icon fas fa-church"></i>
                  <p>GCM Manila</p>
                </a>
              </li>
              <li style="display: none" class="nav-item" id="r8">
                <a href="#/R8" class="nav-link">
                  <i class="nav-icon fab fa-r-project"></i>
                  <p>R8 (Special Project)</p>
                </a>
              </li>
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="reports"
              >
                <a class="nav-link">
                  <i class="nav-icon fas fa-file-alt"> </i>
                  <p>
                    Reports
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item">
                    <a href="#/ReportNational" class="nav-link">
                      <i class="nav-icon fa fa-file-pdf"></i>
                      <p>National</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/ReportPerTeam" class="nav-link">
                      <i class="nav-icon fa fa-file-pdf"></i>
                      <p>Per Team</p>
                    </a>
                  </li>
                </ul>
              </li> -->
              <li
                style="display: none"
                class="nav-item has-treeview"
                id="settings"
              >
                <a class="nav-link">
                  <i class="nav-icon fas fa-cogs"> </i>
                  <p>
                    Settings
                    <i class="fas fa-angle-left right"></i>
                  </p>
                </a>
                <ul class="nav nav-treeview">
                  <li class="nav-item" id="addgoal">
                    <a href="#/Settings" class="nav-link">
                      <i class="nav-icon fas fa-users"></i>
                      <p>Users</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/Subjects" class="nav-link">
                      <i class="nav-icon fas fa-file"></i>
                      <p>Subjects</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/Courses" class="nav-link">
                      <i class="nav-icon fas fa-file-invoice"></i>
                      <p>Courses</p>
                    </a>
                  </li>
                  <li class="nav-item">
                    <a href="#/Blocks" class="nav-link">
                      <i class="nav-icon fas fa-chalkboard-teacher"></i>
                      <p>Block</p>
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
          </nav>
          <!-- /.sidebar-menu -->
        </div>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
      <div class="content-wrapper">
        <div class="row-fluid" ng-view></div>
      </div>
      <!-- /.content-wrapper -->

      <!-- Control Sidebar -->
      <aside class="control-sidebar control-sidebar-dark">
        <!-- Control sidebar content goes here -->
        <div class="p-3">
          <h5>Title</h5>
          <p>Sidebar content</p>
        </div>
      </aside>
      <!-- /.control-sidebar -->

      <!-- Main Footer -->
      <footer class="main-footer">
        <!-- <a href="https://ref.adbtc.top/956082" target="_blank" border="0" style="  display: block;
            margin-left: auto;
            margin-right: auto;
            width: 50%;"><img src="https://adbtc.top/promo/banner_468x60.jpg" /></a><br>
            <a href="https://freebitco.in/?r=7161649" style="  display: block;
                margin-left: auto;
                margin-right: auto;
                width: 50%;" target="_blank">
                <img src="https://static1.freebitco.in/banners/468x60-3.png" />
            </a> -->
        <!-- To the right -->
        <div class="float-right d-none d-sm-inline">
          Lets take the next step together!
        </div>
        <!-- Default to the left -->
        <strong>Copyright &copy; 2022 <a href="">CCDI</a>.</strong>
        All rights reserved.
      </footer>
    </div>

    <!-- Bootstrap 4 -->
    <script src="./assets/libraries/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
    <!-- AdminLTE App -->
    <script src="./assets/libraries/dist/js/adminlte.min.js"></script>

    <!-- OPTIONAL SCRIPTS -->
    <script src="./assets/libraries/plugins/chart.js/Chart.min.js"></script>
    <script src="./assets/libraries/dist/js/demo.js"></script>
    <script src="./assets/libraries/dist/js/pages/dashboard3.js"></script>
    <script src="./assets/libraries/plugins/bootstrap-colorpicker/js/bootstrap-colorpicker.min.js"></script>

    <script src="app.js"></script>
    <!-- must be below AngularJS imports -->
    <!-- PDF Make -->
    <script src="./assets/js/pdfmake/build/pdfmake.js"></script>
    <script src="./assets/js/pdfmake/build/vfs_fonts.js"></script>

    <!-- <script src="controllers/home.js"></script> -->
    <script src="controllers/DashboardCtrl.js"></script>
    <script src="controllers/ProfileCtrl.js"></script>
    <script src="controllers/AIACtrl.js"></script>
    <script src="controllers/GANCtrl.js"></script>
    <script src="controllers/SRCtrl.js"></script>
    <script src="controllers/JFCtrl.js"></script>
    <script src="controllers/GCMMCtrl.js"></script>
    <script src="controllers/R8Ctrl.js"></script>
    <script src="controllers/RNCtrl.js"></script>
    <script src="controllers/RPTCtrl.js"></script>
    <script src="controllers/SettingsCtrl.js"></script>
    <script src="controllers/SubjectCtrl.js"></script>
    <script src="controllers/CourseCtrl.js"></script>
    <script src="controllers/BlockCtrl.js"></script>
    <script src="controllers/MySubjectsCtrl.js"></script>
    <script src="controllers/ReportSettingsCtrl.js"></script>
    <script src="controllers/FacultySubjectsCtrl.js"></script>

    <script>
      var developer = "Carl Jason Lignes";

      var ref = firebase.database().ref("block");
      var key = localStorage.getItem("key");
      // var userVerify = firebase.auth().currentUser;
      // localStorage.setItem("email", userVerify.email);
      var user_role = localStorage.getItem("role");
      var email = localStorage.getItem("email");
      var user_key = localStorage.getItem("user_key");
      var display_name = localStorage.getItem("display_name");
      // console.log(window.location.hash);

      if (email) {
        // document.getElementById("photoURL").src =
        //   "assets/libraries/dist/img/user2-160x160.jpg";
        // document.getElementById("username").innerHTML = email;
        var first = localStorage.getItem("first");
        document.getElementById("username").innerHTML = display_name;
        if (user_role == "admin" || user_role == "registrar") {
          if (first) {
            localStorage.removeItem("first");
            window.location.reload();
          }
          $("#facultySubjects").show();
          $("#myprofile").show();
          $("#dashboard").show();
          $("#settings").show();
          if (window.location.hash == "#/") {
            console.log("test1");
            window.location.hash = "#/FacultySubjects";
          }
        } else if (user_role == "faculty") {
          if (first) {
            localStorage.removeItem("first");
            setTimeout(() => {
              window.location.reload();
            }, 500);
          }
          $("#facultySubjects").show();
          $("#myprofile").show();
          $("#dashboard").show();
          if (window.location.hash == "#/") {
            console.log("test1");
            window.location.hash = "#/FacultySubjects";
          }
        } else if (user_role == "student") {
          $("#mysubjects").show();
          $("#myprofile").show();
        }
      } else {
        window.location.href = "./login.html";
      }

      if (!key) {
        const random = (length = 8) => {
          // Declare all characters
          let chars =
            "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

          // Pick characers randomly
          let str = "";
          for (let i = 0; i < length; i++) {
            str += chars.charAt(Math.floor(Math.random() * chars.length));
          }

          return str;
        };
        localStorage.setItem("key", random(20));
        // ref
        //   .push({
        //     blockname: "",
        //   })
        //   .then(function (ref) {
        //     console.log(ref.key);
        //     ref.update({
        //       key: ref.key,
        //     });
        //     localStorage.setItem("key", ref.key);
        //     console.log("Added to database");
        //   });
      }

      var email = localStorage.getItem("email");
      if (email) {
        firebase
          .database()
          .ref("users")
          .orderByChild("email")
          .equalTo(email)
          .once("value", function (snapshot) {
            snapshot.forEach(function (childSnapshot) {
              console.log(childSnapshot.val());
              // var childKey = childSnapshot.key();
              var childData = childSnapshot.val();
              localStorage.setItem("user_key", childData.key);
              localStorage.setItem("role", childData.role);
              // $scope.students.push(childSnapshot.val());
              // console.log($scope.students);
            });
            // var select = document.getElementById('students');

            // for (var i = 0; i < $scope.students.length; i++) {
            //     var opt = document.createElement('option');
            //     opt.value = $scope.students[i].key;
            //     opt.innerHTML = $scope.students[i].firstName + " " + $scope.students[i].lastName + " (" + $scope.students[i].email + ")";
            //     select.appendChild(opt);
            // }
            var user_role = localStorage.getItem("role");

            if (user_role == "admin") {
              $("#dashboard").show();
              $("#settings").show();
            }
            console.log(snapshot.val());
          });
      } else {
        setTimeout(() => {
          var user_role = localStorage.getItem("role");

          if (user_role == "admin") {
            $("#settings").show();
          }
          window.location.reload();
        }, 1000);
      }

      function signout() {
        window.localStorage.removeItem("email");
        window.localStorage.removeItem("username");
        window.localStorage.removeItem("user_key");
        window.localStorage.removeItem("role");
        window.localStorage.removeItem("display_name");
        firebase
          .auth()
          .signOut()
          .then(
            function () {
              console.log("Logged out!");
              window.location.href = "./index.html";
            },
            function (error) {
              console.log(error.code);
              console.log(error.message);
            }
          );
      }
    </script>
  </body>
</html>
